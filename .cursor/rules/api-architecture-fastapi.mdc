---
description: –ü—Ä–∞–≤–∏–ª–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è API –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã FastAPI –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ TRIVE
globs:
  - "backend/**/*"
alwaysApply: true
---

üîß **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API –∏ backend FastAPI**

1. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **FastAPI** + Pydantic + OpenAI API.
2. –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –ª–æ–≥–∏–∫–µ:
   - `/generate` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ —Ç–µ–º–µ
   - `/rewrite` ‚Äî —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è/–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ
   - `/seo` ‚Äî SEO-–∞–Ω–∞–ª–∏–∑ (–≤–æ–¥–Ω–æ—Å—Ç—å, —Ç–æ—à–Ω–æ—Ç–∞, —Ç–µ–≥–∏)
   - `/status` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
   - `/history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

3. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ **Pydantic –º–æ–¥–µ–ª–∏** —Å —Ç–æ—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏:
```python
class TextRequest(BaseModel):
    theme: str
    raw_text: str
    tone: Optional[str]
```

4. –í—Å–µ –æ—Ç–≤–µ—Ç—ã —Å—Ç—Ä–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã:
```python
{
  "text": "...",
  "seo": {"h1": "...", "meta": "..."},
  "status": "draft"
}
```

5. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è async-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ `await` –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, OpenAI).
6. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ OpenAI –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–Ω–µ—Å–µ–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `openai_client.py`
7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `HTTPException` —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º:
```python
raise HTTPException(status_code=400, detail="Missing input text")
```
8. –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ OpenAPI (Swagger UI)
9. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –º–æ–¥—É–ª–∏: `routers`, `services`, `schemas`, `models`
10. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –∏–ª–∏ —Ñ–µ–π–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–º–∞—Ç–∏–∫–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞, –∫–ª—é—á–∏) ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞–π —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —è–≤–Ω–æ.
